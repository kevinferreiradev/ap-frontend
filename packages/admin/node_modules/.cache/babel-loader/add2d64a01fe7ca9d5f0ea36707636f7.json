{"ast":null,"code":"import { fetchUtils } from 'react-admin';\nimport { axiosInstance } from 'services/http';\nimport { CondOperator, RequestQueryBuilder } from '@nestjsx/crud-request'; // TODO This is a uuid hack to filter works based on a uuid\n\nimport { validate as uuidValidate } from 'uuid';\nconst httpClient = fetchUtils.fetchJson;\n\nconst getMessage = error => {\n  return \"random message\";\n  const message = error.response && error.response.data && error.response.data.message;\n\n  if (!message) {\n    return error.response.statusText;\n  }\n\n  return typeof message !== 'string' ? error.response.data.message[0] : error.response.data.message;\n};\n\nconst composeFilter = paramsFilter => {\n  if (paramsFilter && (paramsFilter === '' || typeof paramsFilter.q !== 'undefined' && paramsFilter.q === '')) {\n    paramsFilter = {};\n  }\n\n  const flatFilter = fetchUtils.flattenObject(paramsFilter);\n  return Object.keys(flatFilter).map(key => {\n    const splitKey = key.split('||');\n    let field = splitKey[0];\n    let ops = splitKey[1];\n\n    if (!ops) {\n      if (typeof flatFilter[key] === 'number' || typeof flatFilter[key] === 'boolean' || flatFilter[key].match && flatFilter[key].match(/^\\d+$/) || uuidValidate(flatFilter[key])) {\n        ops = CondOperator.EQUALS;\n      } else {\n        ops = CondOperator.CONTAINS;\n      }\n    }\n\n    if (field.startsWith('_') && field.includes('.')) {\n      field = field.split(/\\.(.+)/)[1];\n    }\n\n    return {\n      field,\n      operator: ops,\n      value: flatFilter[key]\n    };\n  });\n};\n\nconst USER_MOCK = {\n  id: 1,\n  username: \"User 1\",\n  firstName: \"User 2\",\n  lastName: \"User 3\",\n  active: \"User 4\"\n};\nexport const dataProvider = {\n  getList: (resource, params) => new Promise((resolve, reject) => {\n    return resolve({\n      data: USER_MOCK,\n      total: 1\n    });\n    const newResource = resource === 'users' ? 'user' : resource;\n    const {\n      page,\n      perPage\n    } = params.pagination;\n    const query = RequestQueryBuilder.create({\n      filter: composeFilter(params.filter)\n    }).setLimit(perPage).setPage(page).sortBy(params.sort).setOffset((page - 1) * perPage).query();\n    const url = `${newResource}?${query}`;\n    return axiosInstance.get(url).then(response => resolve({\n      data: response.data.data,\n      total: response.data.total\n    })).catch(error => {\n      const message = getMessage(error);\n      error.message = message;\n      return reject(error);\n    });\n  }),\n  getOne: (resource, params) => axiosInstance.get(`/${resource}/${params.id}`).then(response => ({\n    data: response.data\n  })),\n  getMany: (resource, params) => new Promise((resolve, reject) => {\n    const query = RequestQueryBuilder.create().setFilter({\n      field: 'id',\n      operator: CondOperator.IN,\n      value: `${params.ids}`\n    }).query();\n    const url = `${resource}?${query}`;\n    return axiosInstance.get(url).then(response => resolve({\n      data: response.data.data\n    })).catch(error => {\n      const message = getMessage(error);\n      error.message = message;\n      return reject(error);\n    });\n  }),\n  getManyReference: (resource, params) => new Promise((resolve, reject) => {\n    const {\n      page,\n      perPage\n    } = params.pagination;\n    const filter = composeFilter({});\n\n    if (params.id && params.target) {\n      filter.push({\n        field: params.target,\n        operator: CondOperator.EQUALS,\n        value: params.id\n      });\n    }\n\n    const query = RequestQueryBuilder.create({\n      filter\n    }).sortBy(params.sort).setLimit(perPage).setOffset((page - 1) * perPage).query();\n    const url = `${resource}?${query}`;\n    return axiosInstance.get(url).then(({\n      data\n    }) => resolve({\n      data: data.data,\n      total: data.total\n    })).catch(error => {\n      const message = getMessage(error);\n      error.message = message;\n      return reject(error);\n    });\n  }),\n  update: (resource, params) => new Promise((resolve, reject) => axiosInstance.patch(`${resource}/${params.id}`, params.data).then(response => resolve({\n    data: response.data\n  })).catch(error => {\n    const message = getMessage(error);\n    error.message = message;\n    return reject(error);\n  })),\n  updateMany: (resource, params) => {\n    return httpClient(`${resource}`, {\n      method: 'PUT',\n      body: JSON.stringify(params.data)\n    }).then(({\n      json\n    }) => ({\n      data: json\n    }));\n  },\n  create: (resource, params) => new Promise((resolve, reject) => axiosInstance.post(`${resource}`, params.data).then(response => resolve({\n    data: response.data\n  })).catch(error => {\n    const message = getMessage(error);\n    error.message = message;\n    return reject(error);\n  })),\n  delete: (resource, params) => new Promise((resolve, reject) => axiosInstance.delete(`${resource}/${params.id}`).then(({\n    data\n  }) => resolve({\n    data\n  })).catch(error => {\n    const message = getMessage(error);\n    error.message = message;\n    return reject(error);\n  })),\n  deleteMany: (resource, params) => {\n    return new Promise((resolve, reject) => {\n      return Promise.all(params.ids.map(id => axiosInstance.delete(`${resource}/${id}`))).then(responses => resolve({\n        data: responses.map(response => response.data)\n      })).catch(error => {\n        const message = getMessage(error);\n        error.message = message;\n        return reject(error);\n      });\n    });\n  }\n};\nexport default dataProvider;","map":{"version":3,"sources":["/Users/thiagoramalho/Documents/Thiago/Workspace/Firestorm/ap-admin/packages/admin/src/providers/dataProvider.ts"],"names":["fetchUtils","axiosInstance","CondOperator","RequestQueryBuilder","validate","uuidValidate","httpClient","fetchJson","getMessage","error","message","response","data","statusText","composeFilter","paramsFilter","q","flatFilter","flattenObject","Object","keys","map","key","splitKey","split","field","ops","match","EQUALS","CONTAINS","startsWith","includes","operator","value","USER_MOCK","id","username","firstName","lastName","active","dataProvider","getList","resource","params","Promise","resolve","reject","total","newResource","page","perPage","pagination","query","create","filter","setLimit","setPage","sortBy","sort","setOffset","url","get","then","catch","getOne","getMany","setFilter","IN","ids","getManyReference","target","push","update","patch","updateMany","method","body","JSON","stringify","json","post","delete","deleteMany","all","responses"],"mappings":"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","sourcesContent":["import { fetchUtils, DataProvider } from 'react-admin';\nimport { axiosInstance } from 'services/http';\nimport {\n  CondOperator,\n  QueryFilter,\n  QuerySort,\n  RequestQueryBuilder,\n} from '@nestjsx/crud-request';\n// TODO This is a uuid hack to filter works based on a uuid\nimport { validate as uuidValidate } from 'uuid';\n\nconst httpClient = fetchUtils.fetchJson;\n\nconst getMessage = (error: any) => {\n  return \"random message\";\n\n\n  const message =\n    error.response && error.response.data && error.response.data.message;\n  if (!message) {\n    return error.response.statusText;\n  }\n  return typeof message !== 'string'\n    ? error.response.data.message[0]\n    : error.response.data.message;\n};\nconst composeFilter = (paramsFilter: any): QueryFilter[] => {\n  if (\n    paramsFilter &&\n    (paramsFilter === '' ||\n      (typeof paramsFilter.q !== 'undefined' && paramsFilter.q === ''))\n  ) {\n    paramsFilter = {};\n  }\n\n  const flatFilter = fetchUtils.flattenObject(paramsFilter);\n  return Object.keys(flatFilter).map(key => {\n    const splitKey = key.split('||');\n\n    let field = splitKey[0];\n    let ops = splitKey[1];\n    if (!ops) {\n      if (\n        typeof flatFilter[key] === 'number' ||\n        typeof flatFilter[key] === 'boolean' ||\n        (flatFilter[key].match && flatFilter[key].match(/^\\d+$/)) ||\n        uuidValidate(flatFilter[key])\n      ) {\n        ops = CondOperator.EQUALS;\n      } else {\n        ops = CondOperator.CONTAINS;\n      }\n    }\n\n    if (field.startsWith('_') && field.includes('.')) {\n      field = field.split(/\\.(.+)/)[1];\n    }\n    return { field, operator: ops, value: flatFilter[key] } as QueryFilter;\n  });\n};\n\nconst USER_MOCK = {\n  id:1,\n  username: \"User 1\",\n  firstName: \"User 2\",\n  lastName: \"User 3\",\n  active: \"User 4\",\n};\n\nexport const dataProvider: DataProvider = {\n  getList: (resource, params) =>\n    new Promise((resolve, reject) => {\n      return resolve({\n        data: USER_MOCK,\n        total: 1\n      });\n\n\n      const newResource = resource === 'users' ? 'user' : resource;\n      const { page, perPage } = params.pagination;\n      const query = RequestQueryBuilder.create({\n        filter: composeFilter(params.filter),\n      })\n        .setLimit(perPage)\n        .setPage(page)\n        .sortBy(params.sort as QuerySort)\n        .setOffset((page - 1) * perPage)\n        .query();\n      const url = `${newResource}?${query}`;\n      return axiosInstance\n        .get(url)\n        .then(response =>\n          resolve({\n            data: response.data.data,\n            total: response.data.total,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        });\n    }),\n  getOne: (resource, params) =>\n    axiosInstance.get(`/${resource}/${params.id}`).then(response => ({\n      data: response.data,\n    })),\n  getMany: (resource, params) =>\n    new Promise((resolve, reject) => {\n      const query = RequestQueryBuilder.create()\n        .setFilter({\n          field: 'id',\n          operator: CondOperator.IN,\n          value: `${params.ids}`,\n        })\n        .query();\n      const url = `${resource}?${query}`;\n\n      return axiosInstance\n        .get(url)\n        .then(response =>\n          resolve({\n            data: response.data.data,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        });\n    }),\n  getManyReference: (resource, params) =>\n    new Promise((resolve, reject) => {\n      const { page, perPage } = params.pagination;\n      const filter: QueryFilter[] = composeFilter({});\n      if (params.id && params.target) {\n        filter.push({\n          field: params.target,\n          operator: CondOperator.EQUALS,\n          value: params.id,\n        });\n      }\n\n      const query = RequestQueryBuilder.create({\n        filter,\n      })\n        .sortBy(params.sort as QuerySort)\n        .setLimit(perPage)\n        .setOffset((page - 1) * perPage)\n        .query();\n\n      const url = `${resource}?${query}`;\n      return axiosInstance\n        .get(url)\n        .then(({ data }) =>\n          resolve({\n            data: data.data,\n            total: data.total,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        });\n    }),\n  update: (resource, params) =>\n    new Promise((resolve, reject) =>\n      axiosInstance\n        .patch(`${resource}/${params.id}`, params.data)\n        .then(response =>\n          resolve({\n            data: response.data,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        }),\n    ),\n  updateMany: (resource, params) => {\n    return httpClient(`${resource}`, {\n      method: 'PUT',\n      body: JSON.stringify(params.data),\n    }).then(({ json }) => ({ data: json }));\n  },\n  create: (resource, params) =>\n    new Promise((resolve, reject) =>\n      axiosInstance\n        .post(`${resource}`, params.data)\n        .then(response =>\n          resolve({\n            data: response.data,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        }),\n    ),\n  delete: (resource, params) =>\n    new Promise((resolve, reject) =>\n      axiosInstance\n        .delete(`${resource}/${params.id}`)\n        .then(({ data }) => resolve({ data }))\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        }),\n    ),\n  deleteMany: (resource, params) => {\n    return new Promise((resolve, reject) => {\n      return Promise.all(\n        params.ids.map(id => axiosInstance.delete(`${resource}/${id}`)),\n      )\n        .then(responses =>\n          resolve({ data: responses.map(response => response.data) }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        });\n    });\n  },\n};\n\nexport default dataProvider;\n"]},"metadata":{},"sourceType":"module"}