{"ast":null,"code":"import { fetchUtils } from 'react-admin';\nimport { axiosInstance } from 'services/http';\nimport { CondOperator, RequestQueryBuilder } from '@nestjsx/crud-request'; // TODO This is a uuid hack to filter works based on a uuid\n\nimport { validate as uuidValidate } from 'uuid';\nconst httpClient = fetchUtils.fetchJson;\n\nconst getMessage = error => {\n  return \"random message\";\n  const message = error.response && error.response.data && error.response.data.message;\n\n  if (!message) {\n    return error.response.statusText;\n  }\n\n  return typeof message !== 'string' ? error.response.data.message[0] : error.response.data.message;\n};\n\nconst composeFilter = paramsFilter => {\n  if (paramsFilter && (paramsFilter === '' || typeof paramsFilter.q !== 'undefined' && paramsFilter.q === '')) {\n    paramsFilter = {};\n  }\n\n  const flatFilter = fetchUtils.flattenObject(paramsFilter);\n  return Object.keys(flatFilter).map(key => {\n    const splitKey = key.split('||');\n    let field = splitKey[0];\n    let ops = splitKey[1];\n\n    if (!ops) {\n      if (typeof flatFilter[key] === 'number' || typeof flatFilter[key] === 'boolean' || flatFilter[key].match && flatFilter[key].match(/^\\d+$/) || uuidValidate(flatFilter[key])) {\n        ops = CondOperator.EQUALS;\n      } else {\n        ops = CondOperator.CONTAINS;\n      }\n    }\n\n    if (field.startsWith('_') && field.includes('.')) {\n      field = field.split(/\\.(.+)/)[1];\n    }\n\n    return {\n      field,\n      operator: ops,\n      value: flatFilter[key]\n    };\n  });\n};\n\nexport const dataProvider = {\n  getList: (resource, params) => new Promise((resolve, reject) => {\n    const newResource = resource === 'users' ? 'user' : resource;\n    const {\n      page,\n      perPage\n    } = params.pagination;\n    const query = RequestQueryBuilder.create({\n      filter: composeFilter(params.filter)\n    }).setLimit(perPage).setPage(page).sortBy(params.sort).setOffset((page - 1) * perPage).query();\n    const url = `${newResource}?${query}`;\n    return axiosInstance.get(url).then(response => resolve({\n      data: response.data.data,\n      total: response.data.total\n    })).catch(error => {\n      const message = getMessage(error);\n      error.message = message;\n      return reject(error);\n    });\n  }),\n  getOne: (resource, params) => axiosInstance.get(`/${resource}/${params.id}`).then(response => ({\n    data: response.data\n  })),\n  getMany: (resource, params) => new Promise((resolve, reject) => {\n    const query = RequestQueryBuilder.create().setFilter({\n      field: 'id',\n      operator: CondOperator.IN,\n      value: `${params.ids}`\n    }).query();\n    const url = `${resource}?${query}`;\n    return axiosInstance.get(url).then(response => resolve({\n      data: response.data.data\n    })).catch(error => {\n      const message = getMessage(error);\n      error.message = message;\n      return reject(error);\n    });\n  }),\n  getManyReference: (resource, params) => new Promise((resolve, reject) => {\n    const {\n      page,\n      perPage\n    } = params.pagination;\n    const filter = composeFilter({});\n\n    if (params.id && params.target) {\n      filter.push({\n        field: params.target,\n        operator: CondOperator.EQUALS,\n        value: params.id\n      });\n    }\n\n    const query = RequestQueryBuilder.create({\n      filter\n    }).sortBy(params.sort).setLimit(perPage).setOffset((page - 1) * perPage).query();\n    const url = `${resource}?${query}`;\n    return axiosInstance.get(url).then(({\n      data\n    }) => resolve({\n      data: data.data,\n      total: data.total\n    })).catch(error => {\n      const message = getMessage(error);\n      error.message = message;\n      return reject(error);\n    });\n  }),\n  update: (resource, params) => new Promise((resolve, reject) => axiosInstance.patch(`${resource}/${params.id}`, params.data).then(response => resolve({\n    data: response.data\n  })).catch(error => {\n    const message = getMessage(error);\n    error.message = message;\n    return reject(error);\n  })),\n  updateMany: (resource, params) => {\n    return httpClient(`${resource}`, {\n      method: 'PUT',\n      body: JSON.stringify(params.data)\n    }).then(({\n      json\n    }) => ({\n      data: json\n    }));\n  },\n  create: (resource, params) => new Promise((resolve, reject) => axiosInstance.post(`${resource}`, params.data).then(response => resolve({\n    data: response.data\n  })).catch(error => {\n    const message = getMessage(error);\n    error.message = message;\n    return reject(error);\n  })),\n  delete: (resource, params) => new Promise((resolve, reject) => axiosInstance.delete(`${resource}/${params.id}`).then(({\n    data\n  }) => resolve({\n    data\n  })).catch(error => {\n    const message = getMessage(error);\n    error.message = message;\n    return reject(error);\n  })),\n  deleteMany: (resource, params) => {\n    return new Promise((resolve, reject) => {\n      return Promise.all(params.ids.map(id => axiosInstance.delete(`${resource}/${id}`))).then(responses => resolve({\n        data: responses.map(response => response.data)\n      })).catch(error => {\n        const message = getMessage(error);\n        error.message = message;\n        return reject(error);\n      });\n    });\n  }\n};\nexport default dataProvider;","map":{"version":3,"sources":["/Users/thiagoramalho/Documents/Thiago/Workspace/Firestorm/ap-admin/packages/admin/src/providers/dataProvider.ts"],"names":["fetchUtils","axiosInstance","CondOperator","RequestQueryBuilder","validate","uuidValidate","httpClient","fetchJson","getMessage","error","message","response","data","statusText","composeFilter","paramsFilter","q","flatFilter","flattenObject","Object","keys","map","key","splitKey","split","field","ops","match","EQUALS","CONTAINS","startsWith","includes","operator","value","dataProvider","getList","resource","params","Promise","resolve","reject","newResource","page","perPage","pagination","query","create","filter","setLimit","setPage","sortBy","sort","setOffset","url","get","then","total","catch","getOne","id","getMany","setFilter","IN","ids","getManyReference","target","push","update","patch","updateMany","method","body","JSON","stringify","json","post","delete","deleteMany","all","responses"],"mappings":"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","sourcesContent":["import { fetchUtils, DataProvider } from 'react-admin';\nimport { axiosInstance } from 'services/http';\nimport {\n  CondOperator,\n  QueryFilter,\n  QuerySort,\n  RequestQueryBuilder,\n} from '@nestjsx/crud-request';\n// TODO This is a uuid hack to filter works based on a uuid\nimport { validate as uuidValidate } from 'uuid';\n\nconst httpClient = fetchUtils.fetchJson;\n\nconst getMessage = (error: any) => {\n  return \"random message\";\n\n\n  const message =\n    error.response && error.response.data && error.response.data.message;\n  if (!message) {\n    return error.response.statusText;\n  }\n  return typeof message !== 'string'\n    ? error.response.data.message[0]\n    : error.response.data.message;\n};\nconst composeFilter = (paramsFilter: any): QueryFilter[] => {\n  if (\n    paramsFilter &&\n    (paramsFilter === '' ||\n      (typeof paramsFilter.q !== 'undefined' && paramsFilter.q === ''))\n  ) {\n    paramsFilter = {};\n  }\n\n  const flatFilter = fetchUtils.flattenObject(paramsFilter);\n  return Object.keys(flatFilter).map(key => {\n    const splitKey = key.split('||');\n\n    let field = splitKey[0];\n    let ops = splitKey[1];\n    if (!ops) {\n      if (\n        typeof flatFilter[key] === 'number' ||\n        typeof flatFilter[key] === 'boolean' ||\n        (flatFilter[key].match && flatFilter[key].match(/^\\d+$/)) ||\n        uuidValidate(flatFilter[key])\n      ) {\n        ops = CondOperator.EQUALS;\n      } else {\n        ops = CondOperator.CONTAINS;\n      }\n    }\n\n    if (field.startsWith('_') && field.includes('.')) {\n      field = field.split(/\\.(.+)/)[1];\n    }\n    return { field, operator: ops, value: flatFilter[key] } as QueryFilter;\n  });\n};\n\nexport const dataProvider: DataProvider = {\n  getList: (resource, params) =>\n    new Promise((resolve, reject) => {\n      const newResource = resource === 'users' ? 'user' : resource;\n      const { page, perPage } = params.pagination;\n      const query = RequestQueryBuilder.create({\n        filter: composeFilter(params.filter),\n      })\n        .setLimit(perPage)\n        .setPage(page)\n        .sortBy(params.sort as QuerySort)\n        .setOffset((page - 1) * perPage)\n        .query();\n      const url = `${newResource}?${query}`;\n      return axiosInstance\n        .get(url)\n        .then(response =>\n          resolve({\n            data: response.data.data,\n            total: response.data.total,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        });\n    }),\n  getOne: (resource, params) =>\n    axiosInstance.get(`/${resource}/${params.id}`).then(response => ({\n      data: response.data,\n    })),\n  getMany: (resource, params) =>\n    new Promise((resolve, reject) => {\n      const query = RequestQueryBuilder.create()\n        .setFilter({\n          field: 'id',\n          operator: CondOperator.IN,\n          value: `${params.ids}`,\n        })\n        .query();\n      const url = `${resource}?${query}`;\n\n      return axiosInstance\n        .get(url)\n        .then(response =>\n          resolve({\n            data: response.data.data,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        });\n    }),\n  getManyReference: (resource, params) =>\n    new Promise((resolve, reject) => {\n      const { page, perPage } = params.pagination;\n      const filter: QueryFilter[] = composeFilter({});\n      if (params.id && params.target) {\n        filter.push({\n          field: params.target,\n          operator: CondOperator.EQUALS,\n          value: params.id,\n        });\n      }\n\n      const query = RequestQueryBuilder.create({\n        filter,\n      })\n        .sortBy(params.sort as QuerySort)\n        .setLimit(perPage)\n        .setOffset((page - 1) * perPage)\n        .query();\n\n      const url = `${resource}?${query}`;\n      return axiosInstance\n        .get(url)\n        .then(({ data }) =>\n          resolve({\n            data: data.data,\n            total: data.total,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        });\n    }),\n  update: (resource, params) =>\n    new Promise((resolve, reject) =>\n      axiosInstance\n        .patch(`${resource}/${params.id}`, params.data)\n        .then(response =>\n          resolve({\n            data: response.data,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        }),\n    ),\n  updateMany: (resource, params) => {\n    return httpClient(`${resource}`, {\n      method: 'PUT',\n      body: JSON.stringify(params.data),\n    }).then(({ json }) => ({ data: json }));\n  },\n  create: (resource, params) =>\n    new Promise((resolve, reject) =>\n      axiosInstance\n        .post(`${resource}`, params.data)\n        .then(response =>\n          resolve({\n            data: response.data,\n          }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        }),\n    ),\n  delete: (resource, params) =>\n    new Promise((resolve, reject) =>\n      axiosInstance\n        .delete(`${resource}/${params.id}`)\n        .then(({ data }) => resolve({ data }))\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        }),\n    ),\n  deleteMany: (resource, params) => {\n    return new Promise((resolve, reject) => {\n      return Promise.all(\n        params.ids.map(id => axiosInstance.delete(`${resource}/${id}`)),\n      )\n        .then(responses =>\n          resolve({ data: responses.map(response => response.data) }),\n        )\n        .catch(error => {\n          const message = getMessage(error);\n\n          error.message = message;\n          return reject(error);\n        });\n    });\n  },\n};\n\nexport default dataProvider;\n"]},"metadata":{},"sourceType":"module"}